/*
Scott Kinder
JQuery Cup page
*/

"use strict";
//Car accidents under certain conditions
var R0V0 = [23,59,23,31,27,18,27,18,19,45,30,48,66,39,29,43,32,26,48,41,16,16,19,18];
var R1V0 = [34,74,70,118,123,132,112,122,91,70,108,171,118,65,48,48,28,33,24,34,13,14,21,20];
var R0V6 = [16,13,10,14,23,14,10,11,14,10,16,39,21,17,8,5,5,0,10,2,0,6,2,6];
var R1V6 = [22,15,40,45,63,38,48,53,42,36,39,40,12,30,14,7,11,7,9,8,10,8,5,21];
var R0V7 = [10,19,20,10,12,8,18,27,8,26,60,39,14,22,17,10,2,3,6,7,6,6,6,9];
var R1V7 = [18,23,28,53,21,31,51,32,33,45,33,34,20,28,9,15,11,10,13,18,10,2,11,10];
var R0V8 = [4,12,8,14,4,16,6,8,8,20,25,41,11,3,8,26,15,4,4,6,5,3,2,5];
var R1V8 = [10,11,27,35,35,29,21,48,53,37,40,38,3,13,12,12,10,9,10,8,1,3,4,1];
var R0V9 = [18,20,9,13,5,6,12,12,23,19,46,36,21,18,22,16,21,10,7,15,2,6,2,4];
var R1V9 = [8,19,32,26,13,38,44,23,51,42,69,46,23,20,26,14,10,15,7,14,4,0,2,8];
var R0V10 = [1040,1565,2097,2750,2270,2461,2681,3123,3312,3178,3693,3550,1790,1570,1268,1026,949,695,616,715,325,280,300,584];
var R1V10 = [141,185,314,380,275,381,388,576,492,465,520,433,210,193,169,141,131,79,78,81,53,38,64,92];

//Car traffic under certain conditions
var tR0V10 = [70915.2223,56895.30806,36626.47494,32835.41203,33171.03384,56500.8284,77336.85729,84571.03772,113261.846,182463.9732,252658.6189,322714.5109,364441.6995,394642.7537,382230.7851,382817.6938,351131.6648,296800.6094,262197.9733,167067.3948,122691.4058,94888.16061,74421.98567,57917.90265];
var tR1V10 = [4632.229485,3897.875672,2240.626268,1895.117949,1957.171704,3755.342069,5974.319268,6110.475707,8035.702836,14286.63662,15800.94149,21473.78415,25405.79155,26371.75113,28404.0814,27485.61708,27150.53159,20729.54648,19012.37776,10997.1224,8823.126875,5839.271422,4817.275162,3686.690175];
var tR0V9 = [589.5564799,923.1810803,177.475348,239.3833198,100.8851394,273.1157868,470.41884,513.4853535,1593.285907,1912.38443,3128.899305,2228.411563,4380.308888,4900.944901,5142.118185,5942.836126,6844.671829,5618.288298,4320.994946,2777.05111,2497.11138,2031.050929,933.961511,589.870428];
var tR1V9 = [842.2235427,615.4540535,465.8727884,259.3319298,322.8324461,512.0921003,893.795796,564.8338888,1246.919406,1349.918421,3754.679166,4659.405995,5694.401554,4200.809915,6121.569268,4457.127094,4791.27028,3487.213426,3456.795957,1444.066577,1165.318644,444.2923908,442.402821,405.5359193];
var tR0V8 = [547.4453028,478.6864861,177.475348,179.5374899,121.0621673,273.1157868,329.293188,462.1368181,900.552904,1687.398026,3441.789235,4456.823126,3942.277999,1633.6483,3183.216019,6685.690642,3878.64737,2712.277109,1555.558181,2221.640888,1831.215012,1586.758539,983.11738,589.870428];
var tR1V8 = [673.7788342,410.3027023,310.5818589,418.9208097,302.6554182,409.6736802,423.376956,872.9251009,1108.372805,2137.370833,3598.234201,3849.074518,2409.169888,1867.026629,4162.667102,4457.127094,4563.114552,4455.883822,2419.75717,1555.148622,1082.081598,1015.525465,835.649773,589.870428];
var tR0V7 = [968.5570742,683.8378372,310.5818589,259.3319298,181.5932509,409.6736802,423.376956,616.1824242,623.4597028,1237.425219,2659.564409,4456.823126,6351.447887,4434.188244,4652.392644,3714.272579,2737.868731,2906.011188,3629.635755,1666.230666,1747.977966,1396.347514,933.961511,847.9387403];
var tR1V7 = [1052.779428,991.564864,377.1351144,379.0235897,322.8324461,375.5342069,1034.921448,1026.970707,1385.466006,1912.38443,2503.119444,3443.908779,4161.293443,5134.323229,4162.667102,4457.127094,3878.64737,5230.820139,4320.994946,2221.640888,2080.92615,888.5847816,1179.740856,442.402821];
var tR0V6 = [800.1123656,547.0702698,266.2130219,199.4860998,262.3013625,238.9763135,141.125652,410.7882828,554.1864025,787.4524123,1564.449652,3241.32591,3723.262555,4200.809915,4162.667102,2723.799891,4791.27028,1356.138555,3111.116361,2332.722933,1415.029782,1396.347514,835.649773,811.0718385];
var tR1V6 = [1305.446491,752.2216209,510.2416254,478.7666396,665.8419201,887.6263072,1270.130868,1335.061919,1385.466006,2362.357237,2816.009374,2633.577302,5475.38611,7001.349858,3428.07879,3466.654407,5019.426008,3487.213426,3456.795957,1888.394755,1747.977966,1396.347514,786.493904,811.0718385];
var tR0V0 = [3242.56064,2837.927024,776.4546473,518.6638596,645.6648922,716.9289404,1223.088984,1386.410454,2147.47231,4387.234868,7196.468401,10534.30921,17740.251,15869.72635,18119.84503,21047.54461,20762.17121,20729.54648,21604.97473,14884.99395,12069.37167,8378.085084,6291.951232,3059.952845];
var tR1V0 = [2105.558857,1880.554052,953.9299953,1017.379109,1271.152757,2048.368401,2022.801012,2053.941414,2493.838811,3374.796053,5162.683853,8913.646251,12702.89577,12602.42975,11998.27577,12380.9086,7985.450467,8330.565407,7432.111307,7553.57902,4661.274575,3871.690834,2949.35214,1806.478186];

(function() {
	$(document).ready(function() {
		$("#submitbutton").on("click", function() {
			$.fn.displayGraph();
			//alert(H0R0V0[1]);
		});

		$("#calcbutton").on("click", function() {
			$.fn.displayPercent();
		});
	});

	$.fn.displayPercent = function() {
		var hour = $("#hours").val();
		var vis = $("#visibility").val();
		var rain = 0;
		if(document.getElementById('rain').checked) {
		    rain = 1;
		}
		var percentString = "R" + rain + "V" + vis;
		//alert(percentString);
		//alert(window[percentString][0]);
		var percent = ((window[percentString][hour] / window["t" + percentString][hour]) / 6) * 100;
		$("#calcvalue").html("" + window[percentString][hour] + " / (" + Math.round(window["t" + percentString][hour] * 100) / 100 + " * 6) * 100 = " + Math.round(percent * 100) / 100 + "%");
	};

	$.fn.displayGraph = function() {
		var vis = $("#visibility").val();
		var rain = 0;
		if(document.getElementById('rain').checked) {
		    rain = 1;
		}
		var highway = 0;
		if(document.getElementById('highway').checked) {
		    highway = 1;
		}
		var graphType = "";
		if(document.getElementById('line').checked) {
		    graphType = "L";
		} 
		if(document.getElementById('bar').checked) {
		    graphType = "B";
		}
		var imgString = "H" + highway + "R" + rain + "V" + vis + graphType + ".jpeg";
		$("#graphimg").attr("src", imgString);
		if (highway == 0) {
			var percentString = "percentR" + rain + "V" + vis + ".jpeg";
			$("#percentimg").attr("src", percentString);
		}
		
		//alert("vis: " + vis + ", rain: " + rain + ", highway: " + highway + ", line: " + line + ", bar: " + bar);
	};

	$.fn.loadButton = function(x, y) {
		var loading = document.createElement("img");
		loading.id = "load";
		loading.style.left = "" + x + "px";
		loading.style.top = "" + y + "px";
		loading.src = "https://webster.cs.washington.edu/images/babynames/loading.gif";
		$("#content").append(loading);
	};
})();